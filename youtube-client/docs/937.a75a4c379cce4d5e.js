"use strict";(self.webpackChunkyoutube_client=self.webpackChunkyoutube_client||[]).push([[937],{937:(Q,g,r)=>{r.r(g),r.d(g,{YoutubeModule:()=>J});var f=r(9808),S=r(4466),c=r(3692),w=r(7574),t=r(5e3);let u=(()=>{class s{constructor(){this.underliningColor={blue:"#2F80ED",red:"#EB5757",green:"#27AE60",yellow:"#F2C94C"}}underlining(e){const a=e,p=new Date(a).getMonth()+1,l=(new Date).getMonth()+1;return p===l?new Date(a).getDate()-(new Date).getDate()<7?this.underliningColor.blue:this.underliningColor.green:p-l>6?this.underliningColor.red:this.underliningColor.yellow}addLink(e){return e?"/main/"+e:"/main/"}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac}),s})();var b=r(4004),P=r(5577),M=r(520);let d=(()=>{class s{constructor(e){this.http=e,this.apiKey="AIzaSyA8b1f4Dd2OpT1MKC-ipnAQngul1Zkjg6Q"}getSearchList(e){return this.http.get(`https://youtube.googleapis.com/youtube/v3/search?part=snippet&maxResults=15&q=${e}&type=video&key=${this.apiKey}`).pipe((0,b.U)(i=>{const o=[];return i.items.forEach(a=>{o.push(a.id.videoId)}),o}),(0,P.z)(i=>this.http.get(`https://youtube.googleapis.com/youtube/v3/videos?part=snippet&part=statistics&id=${i}&key=${this.apiKey}`)))}getDetailsId(e){return this.http.get(`https://youtube.googleapis.com/youtube/v3/videos?part=snippet&part=statistics&id=${e}&key=${this.apiKey}`).pipe((0,b.U)(i=>i))}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(M.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var v=r(42),h=r(5245);let C=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-video-thumbnail"]],inputs:{response:"response",className:"className"},decls:1,vars:3,consts:[["alt","Thumbnails video",3,"src"]],template:function(e,i){1&e&&t._UZ(0,"img",0),2&e&&(t.Tol(i.className.video),t.s9C("src",i.response.url,t.LSH))},styles:[".video-thumbnail[_ngcontent-%COMP%]{margin:20px;width:223px;height:123px}.video-cover[_ngcontent-%COMP%]{width:729px;height:461px}"]}),s})(),y=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-video-title"]],inputs:{response:"response",className:"className"},decls:2,vars:3,template:function(e,i){1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&e&&(t.Tol(i.className.title),t.xp6(1),t.Oqu(i.response))},styles:[".card-title[_ngcontent-%COMP%]{margin:21px 31px 0 9px;max-height:70px;overflow:hidden;font-style:normal;font-weight:700;font-size:20px;line-height:23px;text-align:right;color:#4f4f4f}.card-detail_title[_ngcontent-%COMP%]{margin:35px 0 0 34px;overflow:hidden;display:inline-block;width:248px;height:66px;font-style:normal;font-weight:700;font-size:24px;line-height:28px;color:#000}"]}),s})();var D=r(2313);const Z=["*"];let T=(()=>{class s{constructor(e,i){this.matIconRegistry=e,this.domSanitizer=i,this.matIconRegistry.addSvgIcon("dislike",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/svg/dislike.svg")),this.matIconRegistry.addSvgIcon("comments",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/svg/comments.svg"))}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(h.jv),t.Y36(D.H7))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-statistics-count"]],inputs:{response:"response",type:"type"},ngContentSelectors:Z,decls:4,vars:1,consts:[[1,"statistic_block"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"div",0),t.Hsn(1),t.TgZ(2,"p"),t._uU(3),t.qZA()()),2&e&&(t.xp6(3),t.Oqu(i.response))},styles:[".statistic_block[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.statistic_block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;margin-left:3px;font-size:10px;line-height:12px}.material-icons[_ngcontent-%COMP%]{font-size:18px;height:13px}"]}),s})(),x=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-statistics-block"]],inputs:{cardDetails:"cardDetails",className:"className"},decls:11,vars:6,consts:[[3,"response"],[1,"material-icons"],["svgIcon","dislike","aria-hidden","false","aria-label","Dislikes icon",1,"statistic_icon",2,"width","15px","height","13px"],["svgIcon","comments","aria-hidden","false","aria-label","Comments icon",1,"statistic_icon",2,"width","15px","height","13px"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"app-statistics-count",0)(2,"span",1),t._uU(3,"visibility"),t.qZA()(),t.TgZ(4,"app-statistics-count",0)(5,"span",1),t._uU(6,"favorite"),t.qZA()(),t.TgZ(7,"app-statistics-count",0),t._UZ(8,"mat-icon",2),t.qZA(),t.TgZ(9,"app-statistics-count",0),t._UZ(10,"mat-icon",3),t.qZA()()),2&e&&(t.Tol(i.className.statistics),t.xp6(1),t.Q6J("response",i.cardDetails.statistics.viewCount),t.xp6(3),t.Q6J("response",i.cardDetails.statistics.likeCount),t.xp6(3),t.Q6J("response",i.cardDetails.statistics.favoriteCount),t.xp6(2),t.Q6J("response",i.cardDetails.statistics.commentCount))},directives:[T,h.Hw],styles:[".statistics[_ngcontent-%COMP%]{width:202px;height:13px;display:flex;justify-content:space-between}.statistics-details[_ngcontent-%COMP%]{width:202px;height:13px;display:flex;justify-content:space-between;position:absolute;right:10%;bottom:24px}.material-icons[_ngcontent-%COMP%]{font-size:18px;height:13px}"]}),s})(),O=(()=>{class s{constructor(e,i,o){this.router=e,this.cardService=i,this.httpService=o,this.classes={title:"card-detail_title",video:"video-cover",statistics:"statistics-details"},this.buttonProps={type:"button",class:"back-button"}}ngOnInit(){this.routerId=this.router.snapshot.params.id,this.selectCard(this.routerId)}underlining(e){return this.cardService.underlining(e)}selectCard(e){e&&this.httpService.getDetailsId([e]).subscribe(i=>this.cardDetails=i.items[0])}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.gz),t.Y36(u),t.Y36(d))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-card-details"]],decls:15,vars:10,consts:[[1,"wrapper"],["routerLink","/.."],[3,"buttonProps"],[1,"details-wrapper"],[3,"className","response"],[1,"card-details"],[1,"card-details_minor-title"],[1,"card-details_description"],[3,"className","cardDetails"],[1,"card-details_underlining"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"a",1)(2,"app-button",2)(3,"mat-icon"),t._uU(4,"arrow_back_ios"),t.qZA()()(),t.TgZ(5,"div",3),t._UZ(6,"app-video-thumbnail",4),t.TgZ(7,"div",5),t._UZ(8,"app-video-title",4),t.TgZ(9,"h4",6),t._uU(10,"Details"),t.qZA(),t.TgZ(11,"p",7),t._uU(12),t.qZA(),t._UZ(13,"app-statistics-block",8)(14,"div",9),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("buttonProps",i.buttonProps),t.xp6(4),t.Q6J("className",i.classes)("response",i.cardDetails.snippet.thumbnails.high),t.xp6(2),t.Q6J("className",i.classes)("response",i.cardDetails.snippet.title),t.xp6(4),t.Oqu(i.cardDetails.snippet.description),t.xp6(1),t.Q6J("className",i.classes)("cardDetails",i.cardDetails),t.xp6(1),t.Udp("background-color",i.underlining(i.cardDetails.snippet.publishedAt)))},directives:[c.yS,v.r,h.Hw,C,y,x],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;max-width:1200px;margin:44px auto auto}.details-wrapper[_ngcontent-%COMP%]{display:flex;filter:drop-shadow(5px 10px 10px rgba(47,128,237,.25));background:#E5E5E5;border-radius:0 0 5px 5px}.details-wrapper[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{margin:auto;display:flex;flex-direction:column;width:436px;height:461px}.details-wrapper[_ngcontent-%COMP%]   .card-details_description[_ngcontent-%COMP%]{margin:0 auto;overflow:hidden;width:365px;height:280px;font-style:normal;font-weight:400;font-size:12px;line-height:14px;color:#828282}.details-wrapper[_ngcontent-%COMP%]   .card-details_minor-title[_ngcontent-%COMP%]{margin:0 auto;width:365px}.details-wrapper[_ngcontent-%COMP%]   .card-details_underlining[_ngcontent-%COMP%]{position:absolute;width:436px;height:5px;top:456px;right:0;border-radius:0 0 5px 5px}.material-icons[_ngcontent-%COMP%]{font-size:18px;height:13px}"]}),s})();var F=r(8372),A=r(4214),I=r(1135);let m=(()=>{class s{constructor(){this.search=new I.X("")}changeSearch(e){this.search.next(e)}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac}),s})(),N=(()=>{class s{constructor(e,i,o){this.searchItemService=e,this.httpService=i,this.youtubeService=o,this.buttonProps={type:"button",class:"more-button",content:"more..."},this.classes={video:"video-thumbnail",title:"card-title",statistics:"statistics"}}underlining(e){return this.searchItemService.underlining(e)}addLink(e){return this.searchItemService.addLink(e)}selectCard(e){console.log(e),console.log(this.searchResults),this.httpService.getDetailsId([e]).subscribe(i=>this.response=i.items)}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(u),t.Y36(d),t.Y36(m))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-search-item"]],inputs:{searchResults:"searchResults"},decls:7,vars:10,consts:[[1,"card"],[3,"className","response"],[3,"className","cardDetails"],[3,"routerLink"],[3,"buttonProps"],[1,"card_underlining"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-video-thumbnail",1)(2,"app-statistics-block",2)(3,"app-video-title",1),t.TgZ(4,"a",3),t._UZ(5,"app-button",4),t.qZA(),t._UZ(6,"div",5),t.qZA()),2&e&&(t.xp6(1),t.Q6J("className",i.classes)("response",i.searchResults.snippet.thumbnails.medium),t.xp6(1),t.Q6J("className",i.classes)("cardDetails",i.searchResults),t.xp6(1),t.Q6J("className",i.classes)("response",i.searchResults.snippet.title),t.xp6(1),t.Q6J("routerLink",i.addLink(i.searchResults.id)),t.xp6(1),t.Q6J("buttonProps",i.buttonProps),t.xp6(1),t.Udp("background-color",i.underlining(i.searchResults.snippet.publishedAt)))},directives:[C,x,y,c.yS,v.r],styles:[".card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;width:263px;height:327px;left:1px;top:0px;background:#E5E5E5;border:1px solid #000000;box-sizing:border-box;box-shadow:0 4px 4px #00000040;border-radius:5px}.card_underlining[_ngcontent-%COMP%]{position:absolute;width:263px;height:5px;top:322px;border-radius:0 0 5px 5px}.material-icons[_ngcontent-%COMP%]{font-size:18px;height:13px}"]}),s})(),U=(()=>{class s{transform(e,i,o){return""===i?e:this.sortButton(i,o,e)}sortButton(e,i,o){return"data"===e?o.sort(i?this.sortPublishedUp:this.sortPublishedDown):"count of views"===e?o.sort(i?this.sortCountViewUp:this.sortCountViewDown):o&&this.getFilter(o,e)?this.sortInput(e,o):o}sortInput(e,i){return i.sort((o,a)=>{const p=this.getFilter(o,e)[e],l=this.getFilter(a,e)[e];return p>l?1:p<l?-1:0})}sortPublishedUp(e,i){return Number(new Date(e.snippet.publishedAt))-Number(new Date(i.snippet.publishedAt))}sortPublishedDown(e,i){return Number(new Date(i.snippet.publishedAt))-Number(new Date(e.snippet.publishedAt))}sortCountViewUp(e,i){return Number(i.statistics.viewCount)-Number(e.statistics.viewCount)}sortCountViewDown(e,i){return Number(e.statistics.viewCount)-Number(i.statistics.viewCount)}getFilter(e,i){if(Object.keys(e).includes(i))return e;for(const o in e)if(e[o]instanceof Object)return this.getFilter(e[o],i);return!1}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275pipe=t.Yjl({name:"searchFilter",type:s,pure:!0}),s})();function Y(s,n){if(1&s&&(t.TgZ(0,"div",2),t._UZ(1,"app-search-item",3),t.qZA()),2&s){const e=n.$implicit;t.xp6(1),t.Q6J("searchResults",e)}}const k=[{path:"",component:(()=>{class s{constructor(e,i,o){this.coreService=e,this.youtubeService=i,this.httpService=o}ngOnInit(){this.searchSubscription=this.coreService.searchValue.pipe((0,F.b)(600)).subscribe(e=>e.length>=3&&this.search(e)),this.filterSubscription=this.coreService.filter$.subscribe(e=>this.changeFilter(e))}ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe(),this.filterSubscription&&this.filterSubscription.unsubscribe()}changeFilter(e){this.filterValue=e,this.direction=!this.direction}search(e){e&&(this.httpService.getSearchList(e).subscribe(i=>this.searchResults=i.items),this.youtubeService.changeSearch(this.searchResults))}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(A.p),t.Y36(m),t.Y36(d))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-main-page"]],decls:3,vars:5,consts:[[1,"search-results"],["class","search-result",4,"ngFor","ngForOf"],[1,"search-result"],[3,"searchResults"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Y,2,1,"div",1),t.ALo(2,"searchFilter"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.Dn7(2,1,i.searchResults,i.filterValue,i.direction)))},directives:[f.sg,N],pipes:[U],styles:[".search-results[_ngcontent-%COMP%]{margin:auto;max-width:1200px;display:flex;flex-wrap:wrap;justify-content:center;column-gap:29px;row-gap:30px}"]}),s})()},{path:":id",component:O,canActivate:[w.a]}];let R=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[c.Bz.forChild(k)],c.Bz]}),s})();var z=r(3075);let J=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[m,u],imports:[[f.ez,R,S.m,z.UX]]}),s})()}}]);